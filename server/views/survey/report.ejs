<!-- 
 File Name : view.ejs
 COMP228 - Web Application Developmnet
 Summer 2021 Group 6
 Mighty Bunch

 Developers: 
 Sarabun Tohura - 300685525
 Yerim Cho - 301143325
 Mohammed Husain - 301149144
 Mostafa Asaad - 301173762
 Chaehyun Lee - 301084271
 Viktoriia Romaniuk - 301079072

 Web App Name : Migthy Survey
 Description : Users can create new survey. 
 There are two types of surveys, True or False / Scale.
 Only logged-in users can answer the survey,
 and only the creator of survey can edit / delte the survey. 
-->
<%- include ../partials/header.ejs %>

<%- include ../partials/main_nav.ejs %>

<!-- Main Content -->
  <main class="container">
    <div class="row">
        <div class="col-md-10">
            <h1 style="color: white"><%= title %></h1>
                
                <a href="#" class="btn btn-primary" role="button" onclick="ExportToExcel('xlsx')">
                <i class="fas fa-file-excel"></i> Export To Excel</a>
                <table id="report_table" class="table table-bordered table-hover border-primary ghost" style="background-color: bisque;">
               <tr>
                  <% if ( survey.type == "True/False" ) { %>
                    <th class="text-center col-6">Question</th>
                    <th class="text-center col-2">True</th>
                    <th class="text-center col-2">False</th>
                  <% } %>
                  <% if ( survey.type == "Scale" ) { %>
                     <th class="text-center col-6">Question</th>
                     <th class="text-center col-1">Very Bad</th>
                     <th class="text-center col-1">Bad</th>
                     <th class="text-center col-1">Good</th>
                     <th class="text-center col-2">Very Good</th>
                     <th class="text-center col-2">Excellent</th> 
                  <% } %>
                  
               </tr>
               
                <% if ( votes > 0)  { %>
                  <% for (i=0; i < survey.question.length; i++ ) { %>
                    <tr>
                      <% if ( survey.type == "True/False" ) { %>
                        <td class="text-center col-6" ><%= survey.question[i] %></td>
                        <td class="text-center col-2"><%= trueAnswer[i] %></td>
                        <td class="text-center col-2"><%= falseAnswer[i] %></td>
                      <% } %> 
                       <% if ( survey.type == "Scale" ) { %>
                        <td class="text-center col-6"><%= survey.question[i] %></td>
                        <td class="text-center col-1"><%= veryBad[i] %></td>
                        <td class="text-center col-1"><%= bad[i] %></td>
                        <td class="text-center col-1"><%= good[i] %></td>
                        <td class="text-center col-2"><%= veryGood[i] %></td>
                        <td class="text-center col-2"><%= excellent[i] %></td>
                        
                      <% } %>
                    </tr>
                  <% } %>
                <% } %>
            </table>
        </div>
    </div>

<div class="chart-container" style="position: relative; height:40vh; width:80vw">
    <canvas style="background-color: white;" id="myChart"></canvas>
</div>

<script>
var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'radar',
    data: {
        labels: ['Very Bad', 'Bad', 'Good', 'Very Good', 'Excelent'],
        datasets: [{
            label: 'Question 1',
            data: [1, 2, 6, 7, 2],
            backgroundColor: 
                'rgba(255, 99, 132, 0.2)',
            borderColor: 
                'rgba(255, 99, 132, 1)',
            borderWidth: 1
        }, {
            label: 'Question 2',
            data: [8, 6, 12, 15, 20],
            backgroundColor: 
                'rgba(0, 99, 132, 0.2)',
            borderColor: 
                'rgba(0, 99, 132, 1)',
            borderWidth: 1
        }]
    },
    options: {
    }
});
</script>
</main>
<%- include ../partials/bottom_nav.ejs %>  

<%- include ../partials/footer.ejs %>